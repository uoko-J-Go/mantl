---
swarm_image: 'swarm'
swarm_manager_port: 4000
swarm_agent_port: 2375

swarm_tls: true

# Generated by certificates role
swarm_ca_cert: /etc/pki/CA/ca.cert
swarm_cert: /etc/pki/swarm/swarm.cert
swarm_key: /etc/pki/swarm/swarm.key

# For using Consul as a discovery backend, with TLS enabled.
consul_ca_cert: /etc/pki/CA/ca.cert
consul_cert: /etc/pki/tls/certs/host.cert
consul_key: /etc/pki/tls/private/host.key

swarm_docker_daemon_options:
  - "-H unix:///var/run/docker.sock"
  - "-H tcp://0.0.0.0:{{ swarm_agent_port }}"

  - "{% if swarm_tls -%}--tlsverify{%- endif %}"
  - "{% if swarm_tls -%}--tlscacert={{ swarm_ca_cert }}{%- endif %}"
  - "{% if swarm_tls -%}--tlscert={{ swarm_cert }}{%- endif %}"
  - "{% if swarm_tls -%}--tlskey={{ swarm_key }}{%- endif %}"
