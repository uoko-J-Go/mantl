Docker Swarm
============

.. versionadded:: 1.1

`Docker Swarm <https://www.docker.com/products/docker-swarm/>`_ "provides
native clustering capabilities to turn a group of Docker engines into a single,
virtual Docker Engine."

Currently, Swarm is not integrated with Mesos, although this is a goal for the
future.

Swarm is shipped as an addon, so please run this role after running the core
playbook (sample.yml).

Variables
---------

You can use these variables to customize your Sarm installation. It's highly
recommended to set :data:`SUBNET`.

.. data:: swarm_manager_port

   The port that the swarm managers listen on. This is the port via which you'll
   communicate with the Swarm's Docker daemon, e.g.
   ``sudo docker -H :<swarm-manager-port> info``. Defaults to 4000.

.. data:: swarm_agent_port

   The port that the Docker socket is exposed on for agents. Defaults to 2375.

.. data:: swarm_tls

   Use TLS to protect the agents' Docker socket exposed over TCP. It is highly
   recommended that you keep this as its default ``true``. When this is
   ``false``, an adversary could execute arbitrary Docker containers within your
   cluster with no authentication.

.. data:: swarm_ca_cert, swarm_host_cert, swarm_key_file

   Paths to the Swarm TLS certificate, CA, and key. Defaults to the certificates
   generated by :doc:`security-setup`.

.. data:: swarm_docker_daemon_options

   Options passed to the Docker daemon. Overrides the :docs:`docker` role's
   ``docker_network_options``. Defaults expose the Docker socket over TCP on the
   ``swarm_agent_port``, and enable TLS verification.
